services:
  db:
    image: 'postgres:16'
    environment:
      - 'POSTGRES_DB=bookkeeping_db'
      - 'POSTGRES_PASSWORD=password'
      - 'POSTGRES_USER=postgres'
    ports:
      - '5432:5432'
    volumes:
      # 名前付きボリュームに変更（エラーが起きにくい）
      - db_data:/var/lib/postgresql/data
      # SQLの自動実行。パスが正しいか再確認してください
      - ./src/main/resources/schema.sql:/docker-entrypoint-initdb.d/01_schema.sql
      - ./src/main/resources/data.sql:/docker-entrypoint-initdb.d/02_data.sql

volumes:
  db_data: